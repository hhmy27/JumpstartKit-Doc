# 介绍

本篇文章会教你如何设置内购，以及如何使用 Jumpstart Kit 处理内购

文章介绍的是最新的 StoreKit 2，简称 StoreKit，这是苹果官方推出的内购框架，非常易用

# 内购类型

苹果的内购分为两种

-   App 内购买项目（In App Purchase，简称 IAP）
    -   对应的是一次性付费的物品
-   订阅
    -   对应的是自动续费的物品

## IAP

IAP 又分为消耗品和非消耗品两种类型

消耗品：例如游戏里面的宝石、金币，这些物品往往可以重复购买

非消耗品：例如 App 中终身会员、特定小组件、特定手表表盘，不能重复购买

**那么这里有一个陷阱，新手很容易踩：**

StoreKit 不会为消耗品保存购买凭证，只会为消耗品保存购买凭证。

如果你把终身会员，设置成消耗品，那么当你想要查询用户是否购买过终身会员，此时是查不到的，这对用户来说体验非常糟糕，已经购买了会员，但是却不是会员身份，只能申请退款

因此，务必设置好 IAP 产品的类型。

## 订阅

订阅就很好理解了，比如说月度订阅、年度订阅等，到期了会自动刷新

苹果规定，所有的订阅必须属于某个群组，然后再给这个群组添加订阅选项

那么为 App 添加订阅，步骤就是：

1. 创建订阅群组
2. 在订阅群组中添加订阅选项
3. 设置订阅选项的价格、持续时长

特别的，我们经常会看到订阅提供了 3 天免费试用，7 天免费试用，也是在这里设置的：

1. 点击特定的订阅选项
2. 找到订阅价格，点击+号，选择「创建推介促销优惠」，进行创建
3. 选择上架的国家、时间、类型
4. 选择免费，周期有 3 天、一周、两周到一年等

# 推荐方案

IAP（非消耗型）：1 个终身会员

订阅：月度会员+年度会员

为你的月度订阅，提供 3 天免费试用，为年度订阅，提供 7 天免费试用

价格比例：

月度会员假设是$1，那么年度会员应该是$12 的 50%～ 80%折扣，而终身会员，一般都是 1.5 倍到 2 倍的价格。

比如说某个 App：

月度会员 $1

年度会员 $6

终身会员 $12

这个价格就比较合理

# 使用 Jumpstart Kit 处理内购

TODO
